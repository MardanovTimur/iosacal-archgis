
User's manual
=============

The current version of GNUCal is in alpha state (i.e. not suitable for
production use), but has already all the basic functionality, like
calibration, generation of publication-quality plots and determination
of probability intervals.

Command line options
--------------------

GNUCal works from the command line. These are the available options.

.. program:: gnucal

.. cmdoption:: -h 

   Show an help message and exit

.. cmdoption:: -d <date>, --date=<date>

   Non-calibrated radiocarbon BP date for the sample

.. cmdoption:: -s <sigma>, --sigma=<sigma>

   Standard deviation for the non-calibrated date given with the
   above option

.. cmdoption:: -c <curve>, --curve=<curve>

   Calibration curve to be used [default: ``intcal04``]

   If you want to specify a different calibration curve provide the
   curve canonical name in lower case (e.g. ``intcal04``, ``marine04``,
   ``shcal04``).

.. cmdoption:: -i, --interpolate

   Interpolate calibration curve to obtain fine-grained dating
   intervals [default: False]

.. cmdoption:: -n <name>, --name=<name>

   Name of sample, used also for output image [default: gnucal]

BP or BC/AD dates
~~~~~~~~~~~~~~~~~

Use these two mutually exclusive options to choose which type of dates
you like as output.

.. cmdoption:: --bp

   Express date in Calibrated BP Age (default action)

.. cmdoption:: --ad

   Express date in Calibrated BC/AD Calendar Age

Plotting options
~~~~~~~~~~~~~~~~

.. cmdoption:: -p, --plot

   Create one or more plots (see `Single and multiple plots`_) instead
   of the text output.

.. cmdoption:: -o, --oxcal

   Draw plots more OxCal-like looking [default: False]


Single and multiple plots
+++++++++++++++++++++++++

Use these two options when more than 1 sample is supplied to choose
which output is generated.

.. cmdoption:: -1, --single

   Generate single plots for each sample (default)

.. cmdoption:: --no-single

   Don't generate single plots for each sample

.. cmdoption:: -m, --multiple

   Generate compound plot with all samples


Basic usage
-----------

The command line program is called ``gnucal``. It can generate both
text output and image plots.

The typical usage is::

    gnucal -d 790 -s 60

Output will look like the following:

.. highlight:: rest

::

   =============
    GNUCal v0.1
   =============

   Atmospheric data from Reimer et al (2004);

   Radiocarbon determination (BP): 790 ± 60 BP

   Calibrated date
   ---------------

   68.2% probability
    BP 760 ‒ BP 755 (5.2 %)
    BP 740 ‒ BP 675 (61.2 %)

   95.4% probability
    BP 900 ‒ BP 865 (4.6 %)
    BP 825 ‒ BP 815 (1.4 %)
    BP 800 ‒ BP 655 (88.9 %)


If you want an image instead of text output, just add the ``-p`` flag::

    gnucal -d 790 -s 60 -p

The result will be saved into the image file named
``gnucal_790±60.png`` in the same directory. It will look more or less
like this:

.. image:: /images/image_790±60.png

Other calibration curves
------------------------

By default, ``gnucal`` uses the *IntCal04* calibration curve. GNUCal
is however able to read *any* calibration curve that uses the same
format as ``intcal04.14c``, like those available on
<http://www.radiocarbon.org/>. If you want to specify a different
calibration curve provide the curve canonical name in lower case
(e.g. ``intcal04``, ``marine04``, ``shcal04``).

To specify a calibration curve, use the ``-c`` command line option::

    ./gnucal -d 790 -s 60 -p -c marine04


.. todo::

   Rewrite this section about other calibration curves once we have
   received authorization to distribute calibration data files.


Interpolation
-------------

The standard *IntCal04* calibration curve [REI2004]_ has a varying resolution
over the 26k calendar years it covers, starting with 20 years spaced values up
to the 5 years resolution available from 12k BP onwards. Other curves show
similar patterns.

This means that the output intervals will follow these limitations. It's
possible to use linear interpolation to get more fine-grained results,
particularly concerning probability intervals.

Use the ``-i`` flag to activate interpolation::

    ./gnucal -d 790 -s 60 -p --ad -i

GNUCal makes use of the **SciPy** library for interpolating calibration curves.
Even if SciPy is not required for GNUCal's normal usage and interpolation is
disabled by default, installing SciPy is recommended.

.. [REI2004] PJ Reimer, MGL Baillie, E Bard, A Bayliss, JW Beck, C Bertrand, PG
   Blackwell, CE Buck, G Burr, KB Cutler, PE Damon, RL Edwards, RG Fairbanks, M
   Friedrich, TP Guilderson, KA Hughen, B Kromer, FG McCormac, S Manning, C
   Bronk Ramsey, RW Reimer, S Remmele, JR Southon, M Stuiver, S Talamo, FW
   Taylor, J van der Plicht, and CE Weyhenmeyer (2004), Radiocarbon
   46:1029-1058.

Multiple dates
--------------

It is also possible to give GNUCal more than one radiocarbon determination,
to see how 2 or more samples relate between themselves.

.. warning::

   Currently GNUCal doesn't perform any Bayesian matching of
   calibrated ages. This feature will be added in future versions.

To use the multiple dates feature, just pass more ``-d`` and ``-s`` options
on the command line::

    ./gnucal -d 790 -s 60 -d 917 -s 55 -d 1005 -s 45 -p

The order in which values are passed to GNUCal matters, so the first
date will be matched to the first standard deviation and so on.

This way, you will get 3 different single plots. If you want to obtain
also a compound plot, add the ``-m`` flag::

    ./gnucal -d 790 -s 60 -d 917 -s 55 -d 1005 -s 45 -p -m

It's also useful to use the ``-n`` option to give a name to the image, and
also a title to the plot::

    ./gnucal -d 790 -s 60 -d 917 -s 55 -d 1005 -s 45 -p -m -n "Donetta"


.. image:: /images/image_Donetta.png
